<html>
    <head>
        <script src="APIKEY.js"></script>
        <script src="currencies.js"></script>
        <style>
            #currencyConveter{
                font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
                display: flex;
                flex-wrap:wrap;

                align-items: center;
                flex-direction: column;
                height:100%;
                color:lightslategrey;
            }
            #currencyConveter h1{
                color:red;
            }
            input{
                border:0px solid;
                border-right: 2px solid; 
                padding:10px;
                font-size: 2em;
                outline: 0px;
                width:200px;
                color:rgb(20, 68, 68);

            }
            select{
                padding:20px;
                font-size: 1em;
                border:none;
                width:200px;
                font-size: 1.5em;
                text-align: right;
            }
            #currencyConveter div{
                border:2px solid;
                margin:20px;
                padding:20px;
                border-radius: 15px;
            }
        </style>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

    </head>
    <body>
        <div class="p-2">
            <div class="text-center">
                <h3>Javascript Mini Project on API calling Event Handling, Event Object, target, DOM Manipulation</h3>
                <h5>Currency Converter</h5>
            </div>
            <hr>
            <p>
                Instructions:
                <ol>
                    <li>Enter the Money values in one of the textboxes</li>
                    <li>select the currency you want to convert from</li>
                    <li>select the currency you want to convert to</li>
                </ol>
            </p>
          </div>
        <div id="currencyConveter">
            
            <div>
                <input type="number" id="fromamount" onchange="convertTo(event)" value="1">
                <select name="fromcurrency" id="fromcurrency" onchange="convertByCurrency(event)">
                </select>
            </div>
            <div>
                <input type="number" id="toamount" onchange="convertFrom(event)" >
                <select name="tocurrency" id="tocurrency" onchange="convertByCurrency(event)">
                </select>
            </div>
        </div>
        
        <script>
            var currencies=[];  

            window.onload=function(){
                for(var k in data){
                    var newoption = document.createElement("option");
                    newoption.value=data[k]['value'];
                    newoption.innerHTML=data[k]['code']
                    if(data[k]['code']==='INR'){
                        newoption.selected=true;
                    }
                    document.getElementById("fromcurrency").appendChild(newoption)

                    var newopt=document.createElement("option");
                    newopt.value=data[k]['value'];
                    newopt.innerHTML=data[k]['code'];
                    if(data[k]['code']==='USD'){
                        newopt.selected=true;
                    }
                    document.getElementById("tocurrency").appendChild(newopt);

                }
                convertByCurrency();
                // fetch("https://api.currencyapi.com/v3/latest?apikey="+API_KEY)
                // .then((res)=>{return res.json()})
                // .then((details)=>{
                //     currencies = details.data;
                // })
            }
            function convertTo(e) {
                var fromcurrency=document.getElementById("fromcurrency").value;
                var tocurrency=document.getElementById("tocurrency").value;
                var amt=e.target.value;
                var res=(amt/fromcurrency)*tocurrency;
                document.getElementById('toamount').value=res;
            }
            function convertFrom(e) {
                var fromcurrency=document.getElementById("fromcurrency").value;
                var tocurrency=document.getElementById("tocurrency").value;
                var amt=e.target.value;
                var res=(amt/tocurrency)*fromcurrency;
                document.getElementById('fromamount').value=res;
            }
            function convertByCurrency(e) {
                var fromcurrency=document.getElementById("fromcurrency").value;
                var tocurrency=document.getElementById("tocurrency").value;
                var amt=document.getElementById("fromamount").value;
                var res=(amt/fromcurrency)*tocurrency;
                document.getElementById('toamount').value=res;
            }

        </script>
    </body>
</html>